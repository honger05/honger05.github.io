---
layout: post
title: javascript 正则表达式
date: 2014-06-08
categories: javascript
tags: [js, regexp]
shortContent: ""
---
{% include JB/setup %}

# javascript 正则表达式
---

#### 一、常用正则 (持续更新)

- ip地址：`((2[0-4]\d|25[0-5]|[01]?\d\d?)\.){3}(2[0-4]\d|25[0-5]|[01]?\d\d?)`
- 邮箱：

- 语法类：
  * `<a[^>]+>` 匹配 用尖括号括起来的以a开头的字符串
  * `\b(\w+)\b\s+\1\b` 匹配 重复的单词， 如 `arale arale` 同 ==》 `\b(?<Word>\w+)\b\s+\k<Word>\b` . `\k<Word>` 是反向引用。
  * `(?<=<(\w+)>).*(?=<\/\1>)` 匹配 html标签内的内容 （不包括标签本身） `\1` 是反向引用
  * `a.*b` 贪婪模式， ’aabab‘ 会匹配 ’aabab‘
  * `a.*?b` 懒惰模式  'aabab' 会匹配 ‘aab’ 和 ‘ab’

<!--break-->

#### 二、语法

1. 分支条件 |

  * `0\d{2}-\d{8}|0\d{3}-\d{7}` : 匹配两种以 - 分隔的电话号码，一种是三位区号，8位本地号；一种是四位区号，7位本地号。
  * 使用分支条件是要注意顺序，`\d{5}|\d{5}-\d{4}` 只会匹配前5个数字。从左往右，满足某个分支条件的话就不再执行其它条件。

2. 分组 子表达式 （）

  * 重复多个字符 `(\d{1,3}\.){3}\d{3}` 匹配类似 192.112.234.666 这样的字符。

  * `反向引用`：分组被捕获之后，内容可在表达式中进一步处理
     - 例如 `\1` 代表 分组1匹配的文本
     - `\b(\w+)\b\s+\1\b` 匹配重复单词，如 go go 或者 Alice Alice
     - 自己指定组名，`(?<Word>\w+)` 或 `(?'Word'\w+)`，使用 \k<Word> 反向引用。 上例可以写成：`\b(?<Word>\w+)\b\s+\k<Word>\b`

  * `零宽断言`： 用于指定一个位置
     - `(?=exp)` 断言自身出现的位置的后面能匹配表达式exp。比如：`\b\w+(?=ing\b)` 匹配ing结尾的单词的前面部分。
        如：`I'm singing while you're dancing` 它会匹配 sing 和 danc。
     - `(?<=exp)` 断言自身出现的位置的前面能匹配表达式exp。比如 `(?<=\bre)\w+\b` 匹配re开头的单词的后半部分。
        如：`reading a book` 它会匹配 ading 。
        `(?<=\s)\d+(?=\s)` 匹配 以左右两边各有一个空白符的数字，但不包括这些空白符。

  * `负向零宽断言` ： 用于指定不存在一个位置
     - 比如：一般方法 `\b\w*q[^u]\w*\b` 匹配 包含后面不是字母u的字母q的单词。如果q出现在单词结尾的话，就有问题。因为[^u]总是要匹配一个字符。正确的是 `\b\w*q(?!u)\w*\b` .
     - 使用 `(?!exp)`, 断言此位置的后面不能匹配表达式exp。例如 `\d{3}(?!\d)` 匹配三位数字，而且这三位数字后面不能是数字；
     - 使用 `(?<!exp)`, 断言此位置的前面不能匹配表达式exp。例如 `(?<![a-z])\d{7}` 匹配前面不能是小写字母的七位数字。
     - `(?<=<(\w+)>).*(?=<\/\1>)` 匹配不包含属性的简单html标签里的内容。

  * `贪婪与懒惰`
     - 默认是贪婪的，匹配尽可能多的字符，`a.*b` 匹配最长的以a开始，以b结束的字符串。匹配 `aabab` 的话，它会匹配整个字符串 aabab 。
     - 懒惰匹配，匹配尽可能少的字符，只须加个？号。 `a.*?b` , `aabab` 它会匹配 aab 和 ab 。
        为什么第一个匹配的是 aab 而不是 ab 呢，因为最先开始的匹配拥有最高的优先权

  * 平衡组 / 递归匹配

---
#### 二、tutorial

1. 常用的元字符

|字符|含义|
|---|:---|
|.|匹配除换行符外的任意字符|
|\w|匹配字母、数字、下划线或汉字 一个, 同 [a-z0-9A-Z_]|
|\s|匹配任意的空白符|
|\d|匹配数字, 同 [0-9]|
|\b|匹配单词的开始或结束，边界|
|^|匹配字符串的开始|
|&|匹配字符串的结束|

---
2. 常用的限定符

|代码|含义|
|---|:---|
|*|重复任意次|
|+|至少出现一次|
|？|最多出现一次|
|{n}|出现 n 次|
|{n,}|至少出现 n 次|
|{n,m}|出现 n 到 m 次|

---
3. 常用的反义代码

|代码|含义|
|---|:---|
|\W|匹配不是单词的|
|\S|匹配不是空白符|
|\D|匹配不是数字|
|\B|匹配不是单词的分界|
|[^aeiou]|匹配不是 a、e、i、o、u 中的任意一个|


---
4. 常用分组语法

|分类|代码|含义|
|---|---|:---|
|捕获|(exp)|匹配 exp，并捕获文本到自动命名的组里|
||(?\<name\>exp)|匹配 exp，并捕获文本到名称为name的组里，同 (?'name'exp)|
||(?:exp)|匹配 exp，不捕获匹配的文本，也不给此分组分配组号|
|零宽断言|(?=exp)|匹配 exp 前面的位置|
||(?<=exp)|匹配 exp 后面的位置|
||(?!exp)|匹配后面跟的不是 exp 的位置|
||(?\<\!exp)|匹配前面不是 exp 的位置|
|注释|(?#comment)|注释|

---
5. 懒惰限定符

|代码|含义|
|---|:---|
|*?|出现任意次，但尽可能少出现|
|+?|出现至少一次，但尽可能少出现|
|??|出现至多一次，但尽可能少出现|
|{n, m}?|重复 n 到 m 次，但尽可能少出现|
|{n,}?|重复 n 次以上， 但尽可能少出现|
















